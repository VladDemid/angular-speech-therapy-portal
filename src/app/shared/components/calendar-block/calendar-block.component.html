<div class="app-appointment-details-popup" *ngIf="false || popupService.appointmentDeatailsPopup" >
   <app-appointment-details-popup (voted)="makeLessonFromPopup($event)"
   [selectedDay]="selectedDay"
   [selectedTimeForLesson]="selectedTimeForLesson"
   [month]="month"
   [year]="year"
   [monthsNamesWhomCase]="monthsNamesWhomCase"
   [inputDoctorInfo]="inputDoctorInfo"
   ></app-appointment-details-popup>
</div>
<div class="calendar-manual-order-popup" *ngIf="popupService.manualOrderPopup">
   <app-manual-order-popup (voted)="makeLessonFromPopup($event)"></app-manual-order-popup>
</div>

<div class="debug-block" *ngIf="true && !production">
   <p>selectedDay: {{selectedDay}}</p>
   <p>currentFirstDay: {{currentFirstDay}}</p>
   <p>selectedDayOfWeek: {{selectedDayOfWeek}}</p>
   <p>daysOfWeekShedule: {{daysOfWeekShedule | json}}</p>
   <p>selectedHourForLesson: {{selectedHourForLesson}}</p>
   <p>selectedTimeForLesson: {{selectedTimeForLesson}}<p>
   <!-- ----------------------- -->
   <!-- <p>workStart: {{workStart}}</p>
   <p>workEnd: {{workEnd}}</p>   
   <p>currWorkStart: {{currWorkStart}} </p>   
   <p>currWorkEnd: {{currWorkEnd}}</p>    -->
   <!-- <p>weeklySchedule: {{inputDoctorInfo.weeklySchedule | json}}</p> -->
</div>
<!-- {{inputDoctorInfo.scheduleTime | json}} -->
<div class="calendar">
   <div class="calendar-wrapper">
      <div class="calendar-header">
         
         <div class="arrow arrow-left" id="prev-month-arrow" (click)="decreaseMonth()"></div>
         <div class="month">{{monthName}} {{year}}</div>
         <div class="arrow arrow-right" id="next-month-arrow" (click)="increaseMonth()"></div>
      </div>
      <div class="calendar-body">
         <div class="days-of-week">
            <div *ngFor="let dayName of daysOfWeek" class="day-of-week">
               {{dayName}}
            </div>
         </div>
         <div class="days">
            <div class="day" *ngFor="let dayIndex of daysArr; index as i" [id]="'day'+dayIndex">
               <app-calendar-day [dayIndex] = "i+1" [currentFirstDay]="currentFirstDay" 
               [todayDay]="day" [currentMonth]="currentMonth" [month]="month" [year]="year" 
               [currentYear]="currentYear" [selectedDay]="selectedDay" 
               [doctorShedule]="doctorShedule" [daysOfWeekShedule]="inputDoctorInfo.weeklySchedule"
               [scheduleHoursInput]="inputDoctorInfo.scheduleTime" [scheduleHours]="scheduleHours"
               [doctorsLessons]="doctorsLessons" [isCalendarPage]="isCalendarPage"  
               (outDay)="onOutDay($event)" (click)="onDayClick(i+1)"></app-calendar-day>
            </div>
         </div>
         <!-- isCalendarPage: {{isCalendarPage}}
         month: {{month}} <br>
         –Ω–∞—á–∞–ª–æ –º–µ—Å—è—Ü–∞ —Å: {{currentFirstDay}} <br>
         –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å: {{selectedDay+1}} <br>
         –≤—ã–±—Ä–∞–Ω–Ω—ã–π —á–∞—Å: {{selectedHourForLesson}} -->
      </div>
   </div>
   <!--aside –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (–Ω–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—å) -->
   <div class="time-aside time-aside-view" *ngIf="!isCalendarPage">
      <!-- –∑–∞–ø–∏—Å—å –∫ —Å–ø–µ—Ü—É -->
      <span class="go-to-account-sign" *ngIf='isInProfileModule == "false"'>–î–ª—è –∑–∞–ø–∏—Å–∏ –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ <span class="link" (click)="redirectToSignIn()">–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</span> –∏–ª–∏ <span class="link" (click)="redirectToQuestionForm()">–∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏</span></span> 
      <div class="day-not-chosen-sign" *ngIf="selectedDay == -1 || !(inputDoctorInfo.scheduleTime && inputDoctorInfo.scheduleTime[year] && inputDoctorInfo.scheduleTime[year][month] && inputDoctorInfo.scheduleTime[year][month][selectedDay])">

         <!-- –¥–µ–Ω—å –Ω–µ –≤—ã–±—Ä–∞–Ω -->
         <div class="time-blocker">
            <span class="bold">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞</span>
            <!-- <div class="example">
               <div class="not-working-color color-example"></div>
               <p> - –Ω–µ —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞</p>
            </div>
            <div class="example">
               <div class="working-color color-example"></div>
               <p> - —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞</p>
            </div>
            <div class="example">
               <div class="choosen-day-color color-example"></div>
               <p> - –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å</p>
            </div>
            <div class="example">
               <div class="today-day-color color-example"></div>
               <p> - —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å</p>
            </div> -->
         </div>
      </div>
      <!-- –∫–∞—Ä—Ç–æ—á–∫–∞ –¥–æ–∫—Ç–æ—Ä–∞-->
         <!-- —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å –≤—ã–±—Ä–∞–Ω -->
      <div class="day-chosen" *ngIf="selectedDay != -1 && inputDoctorInfo.scheduleTime && inputDoctorInfo.scheduleTime[year] && inputDoctorInfo.scheduleTime[year][month] && inputDoctorInfo.scheduleTime[year][month][selectedDay]">
         <span class="time-note">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è (–ü–æ –ú–∏–Ω—Å–∫—É)</span> 
         {{inputDoctorInfo.schedule | json}}
         <div class="time-selection doctor-card" *ngIf="inputDoctorInfo.scheduleTime">
            <!-- <div class="day-title">
               <span class="title">–ó–∞–Ω—è—Ç–∏—è </span>
               <span class="day">{{selectedDay}} {{monthsNamesWhomCase[month - 1]}}</span>
            </div> -->
            <div class="time-gaps">
               <div class="time-row" 
                  *ngFor="let time of workGapsCln; index as i"
                  [ngClass]="{active: inputDoctorInfo.scheduleTime && inputDoctorInfo.scheduleTime[year] && inputDoctorInfo.scheduleTime[year][month] && inputDoctorInfo.scheduleTime[year][month][selectedDay] && inputDoctorInfo.scheduleTime[year][month][selectedDay][time], 
                              selected: selectedTimeForLesson === time,
                              booked: inputDoctorInfo.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time]}"
                  (mouseenter)="onHoverTimeRow(time)"
                  (click)="onClickTimeRow(time)">
                  <div class="status">
                     <span class="active">–°–≤–æ–±–æ–¥–Ω–æ</span>
                     <span class="booked">–ó–∞–Ω—è—Ç–æ</span>
                     <span class="deactivated"></span>
                  </div>
                  <span class="time">{{time | timeRow}}</span>
                  <form action="" class="lesson-properties" 
                     *ngIf="selectedTimeForLesson === time"
                     (ngSubmit) = "makeLessonFromTimeRow()">
                     <!-- <span>–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ:</span>
                     <div class="problem">
                        <textarea name="problem" [(ngModel)]="patientProblem" cols="23" rows="4" ></textarea>
                     </div> -->
                     <!-- <button class="submit" [disabled]="isLoading" type="submit">–∑–∞–ø–∏—Å–∞—Ç—å—Å—è</button> -->
                  </form>
                  <!--!–Ω–∞ —ç—Ç—É –Ω–∞–¥–ø–∏—Å—å —Å—Ä–∞–∑—É –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∞—Å—å –∑–∞–ø–∏—Å—å –±–µ–∑ –ø–æ–ø–∞–ø–∞ (click)="makeLessonFromTimeRow()"  -->
                  <div class="buy-button" 
                  *ngIf="selectedTimeForLesson === time"
                  >
                     <span class="pay-sign">–ó–ê–ü–ò–°–ê–¢–¨–°–Ø</span>
                  </div>
                  <!-- <div class="switch" (click)="switchHour(time)" ></div> -->
               </div>
            </div>
         </div>
         <button [routerLink]="['/profile/doctors']" *ngIf='isInProfileModule == "false"'>–í –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</button>
         <!-- <button [disabled]="selectedHourForLesson == -1" (click)="makeAnAppointment(year, month, selectedDay+1, selectedHourForLesson)" *ngIf='isInProfileModule == "true"'>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è(—Å—Ç–∞—Ä)</button> -->
         <!-- <button [disabled]="selectedTimeForLesson == -1 || isLoading" class="makeAppointment" [ngClass]="{updating2: isLoading}" (click)="appointmentDetails()" *ngIf='isInProfileModule == "true" && selectedTimeForLesson != -1'><span data-text="–∑–∞–ø–∏—Å–∞—Ç—å—Å—è">–∑–∞–ø–∏—Å–∞—Ç—å—Å—è</span></button>
         <button [disabled]="true" class="chooseHour" *ngIf='selectedTimeForLesson == -1'>–≤—ã–±–µ—Ä–∏—Ç–µ —á–∞—Å</button> -->
         <div class="doctor-alert error" *ngIf="errorMakingLesson">
            {{errorMakingLesson}}
         </div>
         <div class="doctor-alert success" *ngIf="successMakingLesson" [routerLink]="['profile/calendar']">
            {{successMakingLesson}}
         </div>
      </div>
   </div>
   <!-- –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞–ª–µ–Ω–¥–∞—Ä—è (profile/calendar) -->
      <!-- –¥–µ–Ω—å –Ω–µ –≤—ã–±—Ä–∞–Ω -->
   <div class="time-aside time-aside-edit" *ngIf="isCalendarPage" [ngClass]="{'downloading': updatingdWorkHourData, 'expanded': asideIsExpanded}">
                     <!-- ?üíâ--DOCTOR--üíâ? —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è -->
      <div class="time-aside-doctor" *ngIf="userData.myData.userType == 'doctor'" [ngClass]="{'downloading': updatingdWorkHourData}">
         <div class="day-not-chosen-sign" *ngIf="selectedDay == -1">
            <span>–í—ã–±–µ—Ä–∏—Ç–µ –¥–Ω–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã, –∞ –∑–∞—Ç–µ–º –≤—Ä–µ–º—è –≤ –∫–∞–∂–¥–æ–º –∏–∑ –Ω–∏—Ö</span> 
            <ul class="my-lessons" *ngIf="userData.myData.events">
               <div class="lessons-title">
                  –ó–∞–Ω—è—Ç–∏—è
               </div>
               <li class="lesson-card" 
                  *ngFor="let item of userData.myData.events | lessonsView:currentYear:currentMonth:day:currentHour"
                  [ngClass]="{'selected': item[1].date.day == selectedDay + 1}">
                  <!-- <div class="status" [ngClass]="{'unconfirmed': item[1].doctorsConfirmation == false, 'confirmed': item[1].doctorsConfirmation == true}"></div> -->
                  <div class="subtitle no-margin">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</div>
                  <div class="date">
                     <span class="days-left" *ngIf="item[1].daysLeft > 1">
                        –ß–µ—Ä–µ–∑ {{item[1].daysLeft - 1}} –¥–Ω–µ–π,
                     </span>
                     <span *ngIf="item[1].daysLeft == 0">
                        –°–µ–≥–æ–¥–Ω—è,
                     </span>
                     <span *ngIf="item[1].daysLeft == 1">
                        –ó–∞–≤—Ç—Ä–∞,
                     </span>
                     {{item[1].date.day}} {{monthsNamesWhomCase[item[1].date.month - 1]}}</div>
                  <div class="time">{{item[1].time | timeRow}}</div>
                  <div class="subtitle">–ü–∞—Ü–∏–µ–Ω—Ç</div>
                  <div class="patient-name">{{item[1].patientName}}</div>
                  <div class="problem">{{item[1].problemDescription}}</div>
                  <!-- <button (click)="popupService.toggleEventDetailsPopup(); popupService.eventDetails = item[1]">–ø–æ–¥—Ä</button> -->
                  <!-- <button (click)="confirmEvent(item[0])" *ngIf="!item[1].doctorsConfirmation == true">–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é –∑–∞–Ω—è—Ç–∏–µ</button> -->
                  <div class="details" (click)="popupService.toggleEventDetailsPopup(); popupService.eventDetails = item[1]"></div>
                  <!-- <div class="zoom">{{item[1].zoom.link}}</div> -->
               </li>
            </ul>
         </div>

   
         <!-- –∫–∞–ª–µ–Ω–¥–∞—Ä—å –¥–æ–∫—Ç–æ—Ä–∞ -->
         <!--* —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å –≤—ã–±—Ä–∞–Ω -->
         <div class="time-of-day-chosen" *ngIf="selectedDay != -1">
            <div class="day-title">
               <!-- {{scheduleHours | json}} -->
               <!-- {{userData.myData.scheduleTime | json}} -->
               <span class="title">–ó–∞–Ω—è—Ç–∏—è </span>
               <span class="day">{{selectedDay}} {{monthsNamesWhomCase[month - 1]}}</span>
            </div>
            <!-- <div class="manual-add-order"
               [ngClass]="{enabled: manualAddOrder, 
                           disabled: !manualAddOrder}"
               (click)="toggleManualAddOrder()">
               <span class="title">–ó–∞–ø–∏—Å–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –∑–∞–Ω—è—Ç–∏–µ</span>
            </div> -->
            <!-- <button (click)="testEmail()">test email</button> -->
            <div class="doctor-alert error" *ngIf="errorMakingLesson">
               {{errorMakingLesson}}
            </div>
            <div class="doctor-alert success" *ngIf="successMakingLesson" [routerLink]="['profile/calendar']">
               {{successMakingLesson}}
            </div>
            <div class="time-gaps">
               <!-- <div *ngIf="scheduleHours[2022]">
                  scheduleHours: {{scheduleHours[2022][6][24] | json}}
               </div> -->
               <!-- {{newScheduleHours | json}} -->
               <div class="time-row"
                  *ngFor="let time of workGapsCln; index as i"
                  (click)="switchHour(time)"
                  [ngClass]="{active: scheduleHours && scheduleHours[year] && scheduleHours[year][month] && scheduleHours[year][month][selectedDay] && scheduleHours[year][month][selectedDay][time], 
                              booked: userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time],
                              'waiting-payment': userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time] && userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.state === 'AwaitingPayment',
                              canceled: userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time] && userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.state === 'PaymentRejected',
                              waiting: updatingdWorkHourData && newScheduleHours[time] }">
                  <div class="status" *ngIf="true">
                     <span class="active">–°–≤–æ–±–æ–¥–Ω–æ</span>
                     <span class="booked">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ</span>
                     <span class="waiting-payment red">–û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (20–º–∏–Ω)</span>
                     <span class="canceled red">–ö–ª–∏–µ–Ω—Ç –Ω–µ –æ–ø–ª–∞—Ç–∏–ª</span>
                     <span class="deactivated">–°–∫—Ä—ã—Ç–æ</span>
                     <span class="waiting">–û–±–Ω–æ–≤–ª—è–µ–º</span>
                  </div>
                  <span class="time">{{time | timeRow}}</span>
                  <!-- ? -->
                  <div class="loading-data" *ngIf="userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time]
                           && !userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.date?.time">
                     <!-- userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.date?.time -->
                     <!-- LOADING... -->
                     <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
                  </div>
                  <div class="data-ready" *ngIf="userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time] && userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.date?.time">
                     <div class="lesson-row">
                        <h4>–í—Ä–µ–º—è –∑–∞–Ω—è—Ç–∏—è: </h4>
                        <span>{{userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.date?.time | timeRow}}</span>
                     </div>
                     <div class="lesson-row">
                        <h4>–ö–ª–∏–µ–Ω—Ç </h4>
                        <span>{{userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.patientName}}</span>
                     </div>
                     <div class="details" (click)="popupService.toggleEventDetailsPopup(); popupService.eventDetails = userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]"></div>
                  </div>
                  <!-- ? -->
                  
                  <!-- (click)="switchHour(time)" -->
                  <div class="switch"  ></div>
                  <!-- |manual-add —Ä–µ—à–∏–ª–∏ –ø–æ–∫–∞ —É–¥–∞–ª–∏—Ç—å| -->
                  <!-- <div class="manual-add"
                     *ngIf="manualAddOrder"
                     (click)="openManualOrderPopup($event,time)"
                  >+</div>  -->
                  <!-- <div class="switch"
                     [ngClass]="{active: time | timeCheck:scheduleHours:year:month:selectedDay, 
                                 waiting: updatingdWorkHourData && newScheduleHours[time] }"
                     (click)="switchHour(time)" ></div> -->
               </div>
            </div>
            
         </div>
         <!-- <div class="expand" (click)="invertExpand()">—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å</div> -->
      </div>
                     <!-- ?üíä--CLIENT--üíä?  —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è-->
      <div class="time-aside-client" *ngIf="userData.myData.userType == 'client'">
         <div class="no-lessons-sign" *ngIf="!userData.myData.events">
            —É –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–Ω—è—Ç–∏–π
         </div>
         <div class="my-lessons" *ngIf="userData.myData.orders">
            <div class="lessons-sign">
               <span>–ó–∞–Ω—è—Ç–∏—è –Ω–∞ (–¥–µ–Ω—å)</span>
            </div>
            <div class="time-gaps">
               <!-- <div *ngIf="scheduleHours[2022]">
                  scheduleHours: {{scheduleHours[2022][6][24] | json}}
               </div> -->
               <!-- {{newScheduleHours | json}} -->
               <div class="time-row" 
                  *ngFor="let time of workGapsCln; index as i"
                  [ngClass]="{active: userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time], 
                              booked: userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time] && userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.state === 'PaymentConfirmed',
                              'waiting-payment': userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time] && userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.state === 'AwaitingPayment',
                              canceled: userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time] && userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.state === 'PaymentRejected',
                              waiting: updatingdWorkHourData && newScheduleHours[time] }">
                  <div class="status" *ngIf="true">
                     <span class="empty">–°–≤–æ–±–æ–¥–Ω–æ</span>
                     <span class="booked">–ó–∞–Ω—è—Ç–∏–µ</span>
                     <span class="waiting-payment red">–û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã (20 –º–∏–Ω)</span>
                     <span class="canceled red">–°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã –∏—Å—Ç–µ–∫</span>
                  </div>
                  <div class="loading-data" *ngIf="userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time]
                           && !userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.date?.time">
                     <!-- userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.date?.time -->
                     <!-- LOADING... -->
                     <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
                  </div>
                  <div class="data-ready" *ngIf="userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time] && userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.date?.time">
                     <div class="lesson-row">
                        <h4>–í—Ä–µ–º—è –∑–∞–Ω—è—Ç–∏—è: </h4>
                        <span>{{userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.date?.time | timeRow}}</span>
                     </div>
                     <div class="lesson-row">
                        <h4>–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç </h4>
                        <span>{{userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.doctorName}}</span>
                     </div>
                     <button *ngIf="userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.state === 'AwaitingPayment'" (click)="payForOrder(userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.paymentFormUrl)">–æ–ø–ª–∞—Ç–∏—Ç—å</button>
                     <div class="details" (click)="popupService.toggleEventDetailsPopup(); popupService.eventDetails = userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]"></div>
                     <span class="payment-state">{{userData.myData.ordersFuture[userData.myData.ordersFutureDates?.[year]?.[month]?.[selectedDay]?.[time].orderId]?.state}}</span>
                  </div>
                  <!-- <span class="time">{{time | timeRow}}</span> -->
               </div>
            </div>
            <!-- <div class="lesson-card"
               *ngFor="let item of userData.myData.ordersFutureIds"
               >
               <div class="loading-data" *ngIf="!userData.myData.ordersFuture[item]">
                  <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
               </div>
               <div class="data-ready" *ngIf="userData.myData.ordersFuture[item]">
                   
                  <div class="status" [ngClass]="{'unconfirmed': item[1].doctorsConfirmation == false, 'confirmed': item[1].doctorsConfirmation == true}"></div>
                  <div class="subtitle no-margin">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</div>
                  <div class="date">
                     <div class="date">
                        {{userData.myData.ordersFuture[item].date.day}} 
                        {{monthsNamesWhomCase[userData.myData.ordersFuture[item].date.month - 1]}}, 
                        {{userData.myData.ordersFuture[item].date.time}}:00 (–ú–°–ö) 
                     </div>
                     <span class="days-left" *ngIf="userData.myData.ordersFuture[item].daysLeft > 1">
                        (—á–µ—Ä–µ–∑ {{userData.myData.ordersFuture[item].daysLeft}} –¥–Ω–µ–π)
                     </span>
                     <span *ngIf="userData.myData.ordersFuture[item].daysLeft == 0">
                        (–°–µ–≥–æ–¥–Ω—è)
                     </span>
                     <span *ngIf="userData.myData.ordersFuture[item].daysLeft == 1">
                        (–ó–∞–≤—Ç—Ä–∞)
                     </span>
                  </div>
                  <div class="time">{{userData.myData.ordersFuture[item].time}}</div>
                  <div class="subtitle">–î–æ–∫—Ç–æ—Ä</div>
                  <div class="doctor-name">{{userData.myData.ordersFuture[item].doctorName}}</div>
                  <div class="subtitle">–í–∞—à –≤–æ–ø—Ä–æ—Å</div>
                  <div class="problem">{{userData.myData.ordersFuture[item].problemDescription | slice:0:25}}..</div>
                  <div class="subtitle">–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º—è</div>
                     <div class="time">{{userData.myData.ordersFuture[item].hoursLeft}}</div>
                     
                     <button (click)="popupService.toggleEventDetailsPopup(); popupService.eventDetails = item[1]">–ø–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                  <div class="status" [ngClass]="{'unconfirmed': userData.myData.ordersFuture[item].state !== 'PaymentConfirmed', 'confirmed': userData.myData.ordersFuture[item].state === 'PaymentConfirmed'}"></div>
                  <button *ngIf="userData.myData.ordersFuture[item].state === 'AwaitingPayment'" (click)="payOrder(userData.myData.ordersFuture[item].paymentFormUrl)">–æ–ø–ª–∞—Ç–∏—Ç—å</button>
                  {{userData.myData.ordersFuture[item].state}}
               </div>
               <div class="">-------------</div>
            </div> -->
         </div>
      </div>
      <!-- <div class="bottom-expand" (click)="invertExpand()">{{expandSign}}</div> -->
   </div>
   
</div>

<!-- <div class="change-shedule-block" *ngIf="isCalendarPage && userData.myData.userType == 'doctor'">
   <div class="debug" *ngIf="false && helper.DEBUG">
      <div class="">daysOfWeekShedule:{{daysOfWeekShedule | json}}</div>
      <div class="">newDaysOfWeekShedule: {{newDaysOfWeekShedule | json}}</div>

   </div>
   <div class="days-selection-wrapper">
   <h3>–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è</h3>
      <div class="days-of-week-selection">
         <div class="days-of-week-checkboxes">
            <div class="day-of-week" 
               *ngFor="let item of daysOfWeek; index as i" 
               (click)="changeActiveDaysOfWeek(i)"
               [ngClass]="{active: newDaysOfWeekShedule[i]}">
               <span>{{item}}</span>
            </div>
            
         </div>
      </div>
      <div class="days-of-week-settings">
         <div class="days-of-week-aside-rows">
            <div class="time-row" 
            *ngFor="let item of daysOfWeek; index as i"
            [ngClass]="{active: newDaysOfWeekShedule[i]}"> 
               <span>{{item}}</span>
               <div class="active-row row-settings" *ngIf="newDaysOfWeekShedule[i]">
                  <div class="row-setting from">
                     <span>{{newDaysOfWeekShedule[i][0]}}</span>
                     <div class="increase time-setting-button" (click)="changeWorkHour(1, i, 0)"></div>
                     <div class="decrease time-setting-button" (click)="changeWorkHour(-1, i, 0)"></div>
                  </div>
                  <div class="row-setting to">
                     <span>{{newDaysOfWeekShedule[i][1]}}</span>
                     <div class="increase time-setting-button" (click)="changeWorkHour(1, i, 1)"></div>
                     <div class="decrease time-setting-button" (click)="changeWorkHour(-1, i, 1)"></div>
                  </div> 
               </div>
               <div class="disabled-row row-settings" *ngIf="!newDaysOfWeekShedule[i]">–Ω–µ —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å</div>
            </div>
         </div>
      </div>
   </div>
   <div class="buttons">
      <button class="cancel" (click)="cancelNewShedule()">
         –æ—Ç–º–µ–Ω–∞ 
      </button>
      <button class="submit-new-shedule" (click)="sendNewShedule()" [disabled]="updatingdWorkHourData" [ngClass]="{updating2: updatingdWorkHourData}">
         <span data-text="—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å">—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
      </button>
   </div>
</div> -->
